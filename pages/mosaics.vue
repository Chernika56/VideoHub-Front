<script setup>
definePageMeta({
    title: '–ú–æ–∑–∞–π–∫–∏',
})
import { onMounted, ref, Static } from 'vue'
import FlussonicMsePlayer from '@flussonic/flussonic-mse-player'

const videoRef = ref(null)
const player = shallowRef(null)
const isPlaying = ref(false)

// onMounted(() => {
//     // console.log('üé• videoRef:', videoRef.value)

//     player.value = new FlussonicMsePlayer(
//         videoRef.value,
//         'ws://172.16.0.48/Cam_ATS-327-m96z0l1y/mse_ld?token=thisIsPersonalUserTokenAdmin',
//         {
//             debug: true,
//             wsReconnect: true,
//             retryMuted: true,
//             // onMediaInfo: (info) => console.log('üì∫ MediaInfo:', info),
//             // onEvent: (e) => console.log('üì° –°–æ–±—ã—Ç–∏–µ:', e),
//             // onError: (e) => console.error('‚ùå –û—à–∏–±–∫–∞ –ø–ª–µ–µ—Ä–∞:', e),
//             // onStartStalling: () => console.log('‚è≥ –ó–∞–≤–∏—Å–∞–Ω–∏–µ...'),
//             // onEndStalling: () => console.log('‚úÖ –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–æ'),
//             // onStats: (stats) => console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:', stats),
//         }
//     )
// })

// onBeforeUnmount(() => {
//     if (player.value) {
//         // console.log('üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫')
//         player.value.stop()
//     }
// })

// const startPlayback = () => {
//     if (isPlaying.value) return

//     isPlaying.value = true
//     player.value.play().catch((err) => {
//         // console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ:', err)
//         isPlaying.value = false
//     })
// }

// const stopPlayback = () => {
//     if (!isPlaying.value) return

//     player.value.stop()
//     isPlaying.value = false
//     // console.log('‚èπÔ∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ')
// }
</script>

<template>
    <div>
        –≠—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ú–æ–∑–∞–∏–∫
        <!-- <video ref="videoRef" controls muted playsinline style="width: 100%; max-height: 100%; background: black;" />
        <div style="margin-top: 1rem;">
            <button @click="startPlayback">‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ</button>
            <button @click="stopPlayback" style="margin-left: 10px;">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ</button>
        </div> -->
    </div>
</template>

<style scoped>
video {
    outline: none;
}
</style>